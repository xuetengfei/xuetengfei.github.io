CDN 加回源的架构已经深入人心

CDN 缓存架构下，命中 CDN 缓存才能实现访问的加速，而缓存的命中率是资源的访问频率
和缓存时间来共同决定的，访问次数越多、缓存时间越长，资源的缓存命中率就会越大，那
么用户平均访问时长就会越短。对于已经版本化管理的资源来说，资源的内容就是随版本确
定的，该资源的 CDN 缓存时间可以是无限期的。无限期缓存可以显著提高缓存命中率，但
是访问频率非常低的资源，比如一天只有几次访问，还是会大概率触发回源。因为 CDN 本
身是分布式缓存的节点，访问次数低意味着不一定每一个节点都会有对应的资源缓存，还有
一个原因是 CDN 本身也不是无限的存储空间，有一定的按热度淘汰的算法，访问次数越低
的资源淘汰的概率越高。

对于非版本化管理的资源，也就是覆盖式发布的资源文件，常见的比如页面的 HTML、一段
静态配置的数据。这种依据对应资源更新的频率来进行缓存，对于这种覆盖式发布的场景，
不建议缓存过长时间，以免出现问题影响的时间比较长。如果不幸设置了比较长的缓存时间
，CDN 也有清除缓存的方法，清除缓存不适合大量资源的场景。CDN 通常也会限制大规模的
调用缓存失效的方法，避免大规模缓存失效造成流量大量请求源站。
